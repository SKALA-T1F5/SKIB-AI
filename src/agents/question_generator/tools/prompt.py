"""
Question Generator Prompts
"""
from typing import Dict, List, Optional


def get_vision_prompt(
    source: str,
    page: str,
    difficulty: str,
    num_objective: int,
    num_subjective: int,
    keywords: list = None,
    main_topics: list = None,
    test_config: dict = None,
) -> str:
    """
    GPT-4 Visionìš© ë¬¸ì œ ìƒì„± í”„ë¡¬í”„íŠ¸

    Args:
        source: ë¬¸ì„œ íŒŒì¼ëª…
        page: í˜ì´ì§€ ë²ˆí˜¸
        difficulty: ë‚œì´ë„ (EASY, NORMAL, HARD)
        num_objective: ê°ê´€ì‹ ë¬¸ì œ ìˆ˜
        num_subjective: ì£¼ê´€ì‹ ë¬¸ì œ ìˆ˜
        keywords: í‚¤ì›Œë“œ ëª©ë¡
        main_topics: ì£¼ìš” ì£¼ì œ ëª©ë¡
        test_config: í…ŒìŠ¤íŠ¸ ì„¤ì •

    Returns:
        str: í”„ë¡¬í”„íŠ¸ ë¬¸ìì—´
    """
    # í‚¤ì›Œë“œì™€ ì£¼ì œ ì •ë³´ ì¶”ê°€
    keyword_info = ""
    if keywords:
        keyword_info += f"\n\n**ì¤‘ìš” í‚¤ì›Œë“œ**: {', '.join(keywords[:10])}"
    if main_topics:
        keyword_info += f"\n**ì£¼ìš” ì£¼ì œ**: {', '.join(main_topics[:5])}"

    # í…ŒìŠ¤íŠ¸ ì„¤ì • ì •ë³´ ì¶”ê°€
    test_info = ""
    if test_config:
        if test_config.get("test_summary"):
            test_info += f"\n\n**í…ŒìŠ¤íŠ¸ ëª©ì **: {test_config['test_summary'][:200]}..."
        if test_config.get("topics"):
            test_info += f"\n**í‰ê°€ ì£¼ì œ**: {', '.join(test_config['topics'][:3])}"

    return f"""ğŸ“ **êµìœ¡ ëª©ì  ì „ìš© ë¬¸ì œ ìƒì„±**

ë‹¹ì‹ ì€ ê¸°ì—… êµìœ¡ ë° í•™ìŠµ í‰ê°€ë¥¼ ìœ„í•œ ì „ë¬¸ ë¬¸ì œ ìƒì„± AIì…ë‹ˆë‹¤. ì´ëŠ” ìˆœìˆ˜í•œ êµìœ¡ ëª©ì ì˜ í‰ê°€ ë„êµ¬ ê°œë°œì„ ìœ„í•œ ì‘ì—…ì…ë‹ˆë‹¤.

**ë¬¸ì„œ ì •ë³´**: PDF ë¬¸ì„œ "{source}"ì˜ {page}í˜ì´ì§€ì—ì„œ ì¶”ì¶œëœ êµìœ¡ ìë£Œì…ë‹ˆë‹¤.{keyword_info}{test_info}

**ìƒì„± ìš”ì²­**: ì´ êµìœ¡ ìë£Œë¥¼ ë°”íƒ•ìœ¼ë¡œ í•™ìŠµìì˜ ì´í•´ë„ë¥¼ í‰ê°€í•˜ê¸° ìœ„í•œ ë‚œì´ë„ '{difficulty}' ìˆ˜ì¤€ì˜ ë‹¤ìŒ ë¬¸ì œë“¤ì„ ìƒì„±í•´ì£¼ì„¸ìš”:
- ê°ê´€ì‹ ë¬¸ì œ ({num_objective}ê°œ)
- ì„œìˆ í˜• ë¬¸ì œ ({num_subjective}ê°œ)

**ë¬¸ì œ íƒœê·¸ë³„ ìƒì„± ì¡°ê±´**:
ë¬¸ì œëŠ” ë‹¤ìŒ íƒœê·¸ ì¤‘ í•˜ë‚˜ì”©ì„ ë°˜ë“œì‹œ í¬í•¨í•˜ì—¬ ìƒì„±í•´ ì£¼ì„¸ìš”:

1. **"ì´í•´ë ¥"** - ê¸°ë³¸ ê°œë…ê³¼ ì •ì˜ íŒŒì•…
   - ìš©ì–´ ì •ì˜, ê¸°ë³¸ ê°œë… ì„¤ëª…, ë‹¨ìˆœ ì•”ê¸°í˜• ë¬¸ì œ
   - ì˜ˆ: "ServiceFLOWì˜ ì£¼ìš” ëª©ì ì€ ë¬´ì—‡ì¸ê°€?", "AGS ì¸ë ¥ì˜ ì—­í• ì„ ì„¤ëª…í•˜ì‹œì˜¤"

2. **"ë¶„ì„ë ¥"** - ì •ë³´ ë¶„í•´ ë° ê´€ê³„ íŒŒì•…  
   - êµ¬ì„±ìš”ì†Œ ë¶„ì„, í”„ë¡œì„¸ìŠ¤ ë‹¨ê³„ë³„ ë¶„ì„, ë¹„êµ/ëŒ€ì¡° ë¬¸ì œ
   - ì˜ˆ: "í”„ë¡œì„¸ìŠ¤ì˜ ê° ë‹¨ê³„ë³„ íŠ¹ì§•ì„ ë¶„ì„í•˜ì‹œì˜¤", "ë‘ ì‹œìŠ¤í…œì˜ ì°¨ì´ì ì„ ë¶„ì„í•˜ì‹œì˜¤"

3. **"ë¬¸ì œí•´ê²°ë ¥"** - ì‹¤ë¬´ ìƒí™© í•´ê²° ë°©ì•ˆ ì œì‹œ
   - íŠ¸ëŸ¬ë¸”ìŠˆíŒ…, í•´ê²°ë°©ì•ˆ ì œì‹œ, ì‹¤ë¬´ ì ìš© ë¬¸ì œ
   - ì˜ˆ: "ë¡œê·¸ì¸ ì˜¤ë¥˜ ë°œìƒ ì‹œ í•´ê²° ì ˆì°¨ëŠ”?", "ë¬¸ì˜ ì ‘ìˆ˜ ì‹œ í•„ìš”í•œ ì¡°ì¹˜ë¥¼ ì œì‹œí•˜ì‹œì˜¤"

4. **"ì¶”ë¡ ë ¥"** - ì£¼ì–´ì§„ ì •ë³´ë¡œë¶€í„° ê²°ë¡  ë„ì¶œ
   - ì›ì¸ ì¶”ë¡ , ê²°ê³¼ ì˜ˆì¸¡, íŒ¨í„´ íŒŒì•… ë¬¸ì œ
   - ì˜ˆ: "ì´ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ì›ì¸ì„ ì¶”ë¡ í•˜ì‹œì˜¤", "ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì˜ˆìƒë˜ëŠ” ê²°ê³¼ëŠ”?"

5. **"ë…¼ë¦¬ë ¥"** - ë…¼ë¦¬ì  ì‚¬ê³ ì™€ ìˆœì„œ ì •ë¦½
   - ì ˆì°¨ ìˆœì„œ, ë…¼ë¦¬ì  ê´€ê³„, ì¡°ê±´ë¶€ ì‚¬ê³  ë¬¸ì œ
   - ì˜ˆ: "ì˜¬ë°”ë¥¸ ì ˆì°¨ ìˆœì„œë¥¼ ë‚˜ì—´í•˜ì‹œì˜¤", "ì¡°ê±´ì— ë”°ë¥¸ ì²˜ë¦¬ ë°©ì‹ì„ ë…¼ë¦¬ì ìœ¼ë¡œ ì„¤ëª…í•˜ì‹œì˜¤"

ê° íƒœê·¸ë³„ë¡œ **ìµœì†Œ 1ê°œ ì´ìƒì˜ ë¬¸ì œê°€ ë°˜ë“œì‹œ í¬í•¨**ë˜ì–´ì•¼ í•˜ë©°, ì „ì²´ ë¬¸ì œ ìˆ˜ë¥¼ ì´ ë‹¤ì„¯ ê°œ íƒœê·¸ì— ëŒ€í•´ **ê°€ëŠ¥í•œ í•œ ê· ë“±í•˜ê²Œ ë¶„ë°°**í•´ ì£¼ì„¸ìš”.
(ì˜ˆ: 10ë¬¸ì œë¼ë©´ ê° íƒœê·¸ë³„ 2ë¬¸ì œì”©, 7ë¬¸ì œë¼ë©´ ê° íƒœê·¸ë³„ 1ë¬¸ì œì”© ë°°ë¶„ í›„ ë‚¨ì€ 2ë¬¸ì œëŠ” ì„ì˜ íƒœê·¸ì— í• ë‹¹)

ìƒì„±ë˜ëŠ” ê° ë¬¸ì œì˜ tags í•„ë“œì—ëŠ” ìœ„ì˜ íƒœê·¸ ì¤‘ í•´ë‹¹ ë¬¸ì œì— ë§ëŠ” íƒœê·¸ 1ê°œë§Œ ê¸°ì…í•˜ì„¸ìš”.

**ë¬¸ì œ ìƒì„± ì‹œ ì£¼ì˜ì‚¬í•­**:
- ìœ„ì˜ ì¤‘ìš” í‚¤ì›Œë“œë“¤ì„ í™œìš©í•˜ì—¬ ë¬¸ì œë¥¼ êµ¬ì„±í•˜ì„¸ìš”
- ì£¼ìš” ì£¼ì œì™€ ê´€ë ¨ëœ ì‹¤ë¬´ì  ë‚´ìš©ì„ í¬í•¨í•˜ì„¸ìš”
- ì´ë¯¸ì§€ê°€ ìˆë‹¤ë©´ ì´ë¯¸ì§€ ë‚´ìš©ê³¼ ì—°ê³„í•œ ë¬¸ì œë¥¼ ë§Œë“œì„¸ìš”

ì´ {num_objective + num_subjective}ê°œì˜ ë¬¸ì œë¥¼ **ë°˜ë“œì‹œ ë‹¤ìŒ ëª…ì„¸ì— ë”°ë¥¸ JSON ë¦¬ìŠ¤íŠ¸ í˜•ì‹**ìœ¼ë¡œ ìƒì„±í•´ì£¼ì„¸ìš”.
ë‹¤ë¥¸ ì–´ë–¤ ì„¤ëª…ì´ë‚˜ ì¶”ê°€ í…ìŠ¤íŠ¸ ì—†ì´, ìˆœìˆ˜í•œ JSON ë°°ì—´ ë¬¸ìì—´ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤.

ìš”ì²­ í˜•ì‹ (JSON ë°°ì—´):
[
{{
    "type": "OBJECTIVE",
    "difficulty_level": "{difficulty}",
    "question": "ë¬¸ì œì˜ ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤.",
    "options": ["ì„ íƒì§€ 1ë²ˆ", "ì„ íƒì§€ 2ë²ˆ", "ì„ íƒì§€ 3ë²ˆ", "ì„ íƒì§€ 4ë²ˆ"],
    "answer": "ë¬¸ì œì˜ ì •ë‹µì…ë‹ˆë‹¤.",
    "explanation": "ë¬¸ì œì— ëŒ€í•œ í•´ì„¤ì…ë‹ˆë‹¤.",
    "tags": ["ì´í•´ë ¥"]
}},
{{
    "type": "SUBJECTIVE",
    "difficulty_level": "{difficulty}",
    "question": "ì£¼ê´€ì‹ ë¬¸ì œ ë‚´ìš©",
    "answer": "ëª¨ë²”ë‹µì•ˆ",
    "explanation": "í•´ì„¤",
    "tags": ["ë¶„ì„ë ¥"],
    "grading_criteria": [
        {{
            "score": 5,
            "criteria": "ì™„ì „í•œ ë‹µì•ˆ ì¡°ê±´",
            "keywords_required": ["í•„ìˆ˜í‚¤ì›Œë“œ1", "í•„ìˆ˜í‚¤ì›Œë“œ2"],
            "example": "ëª¨ë²”ë‹µì•ˆ ì˜ˆì‹œ",
            "note": "ì±„ì  ì‹œ ì£¼ì˜ì‚¬í•­"
        }},
        {{
            "score": 3,
            "criteria": "ë¶€ë¶„ì  ë‹µì•ˆ ì¡°ê±´",
            "keywords_optional": ["ì„ íƒí‚¤ì›Œë“œ1"],
            "example": "ë¶€ë¶„ë‹µì•ˆ ì˜ˆì‹œ",
            "note": "ë¶€ë¶„ ì ìˆ˜ ê¸°ì¤€"
        }}
    ]
}}
]

í•„ìˆ˜ ì¡°ê±´:
1. ì‘ë‹µì€ ë°˜ë“œì‹œ ìœ íš¨í•œ JSON ë°°ì—´ í˜•ì‹ì´ì–´ì•¼ í•©ë‹ˆë‹¤.
2. type í•„ë“œëŠ” "OBJECTIVE" ë˜ëŠ” "SUBJECTIVE" ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤.
3. difficulty_level í•„ë“œëŠ” ë°˜ë“œì‹œ '{difficulty}'ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
4. ê°ê´€ì‹ ë¬¸ì œëŠ” options í•„ë“œë¥¼ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤.
5. ì£¼ê´€ì‹ ë¬¸ì œëŠ” options í•„ë“œë¥¼ í¬í•¨í•˜ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤.
6. tagsëŠ” ["ë¶„ì„ë ¥", "ë¬¸ì œí•´ê²°ë ¥", "ì¶”ë¡ ë ¥", "ì´í•´ë ¥", "ë…¼ë¦¬ë ¥"] ì¤‘ì—ì„œ 1ê°œ ì„ íƒí•´ì£¼ì„¸ìš”.
7. ì£¼ê´€ì‹ ë¬¸ì œëŠ” grading_criteria í•„ë“œë¥¼ ë°˜ë“œì‹œ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.
"""


def get_enhanced_vision_prompt(
    source: str,
    page: str,
    difficulty: str,
    num_objective: int,
    num_subjective: int,
    total_test_plan: Optional[Dict] = None,
    document_test_plan: Optional[Dict] = None,
) -> str:
    """
    Test Plan ì •ë³´ë¥¼ í™œìš©í•œ í–¥ìƒëœ ë¬¸ì œ ìƒì„± í”„ë¡¬í”„íŠ¸

    Args:
        source: ë¬¸ì„œ íŒŒì¼ëª…
        page: í˜ì´ì§€ ë²ˆí˜¸
        difficulty: ë‚œì´ë„ (EASY, NORMAL, HARD)
        num_objective: ê°ê´€ì‹ ë¬¸ì œ ìˆ˜
        num_subjective: ì£¼ê´€ì‹ ë¬¸ì œ ìˆ˜
        total_test_plan: ì „ì²´ í…ŒìŠ¤íŠ¸ ê³„íš ì •ë³´
        document_test_plan: ë¬¸ì„œë³„ í…ŒìŠ¤íŠ¸ ê³„íš ì •ë³´

    Returns:
        str: í–¥ìƒëœ í”„ë¡¬í”„íŠ¸ ë¬¸ìì—´
    """
    # ì „ì²´ í…ŒìŠ¤íŠ¸ ê³„íš ì •ë³´ êµ¬ì„±
    total_test_info = ""
    if total_test_plan:
        metadata = total_test_plan.get("metadata", {})
        test_plan = total_test_plan.get("test_plan", {})
        aggregated_info = total_test_plan.get("aggregated_info", {})
        
        total_test_info += f"\n\n**ğŸ“‹ ì „ì²´ í…ŒìŠ¤íŠ¸ ê³„íš ì •ë³´**:"
        if test_plan.get("name"):
            total_test_info += f"\nâ€¢ í…ŒìŠ¤íŠ¸ëª…: {test_plan['name']}"
        if test_plan.get("test_summary"):
            total_test_info += f"\nâ€¢ í…ŒìŠ¤íŠ¸ ëª©ì : {test_plan['test_summary']}"
        if test_plan.get("difficulty_level"):
            total_test_info += f"\nâ€¢ ì „ì²´ ë‚œì´ë„: {test_plan['difficulty_level']}"
        if test_plan.get("limited_time"):
            total_test_info += f"\nâ€¢ ì œí•œì‹œê°„: {test_plan['limited_time']}ë¶„"
        
        # í†µí•©ëœ í‚¤ì›Œë“œì™€ ì£¼ì œ ì •ë³´
        if aggregated_info.get("all_keywords"):
            keywords = aggregated_info["all_keywords"][:15]  # ìƒìœ„ 15ê°œ
            total_test_info += f"\nâ€¢ ì „ì²´ í•µì‹¬ í‚¤ì›Œë“œ: {', '.join(keywords)}"
        
        if aggregated_info.get("all_topics"):
            topics = aggregated_info["all_topics"][:10]  # ìƒìœ„ 10ê°œ
            total_test_info += f"\nâ€¢ ì „ì²´ ì£¼ìš” ì£¼ì œ: {', '.join(topics)}"

        if metadata.get("document_names"):
            total_test_info += f"\nâ€¢ ê´€ë ¨ ë¬¸ì„œ: {', '.join(metadata['document_names'][:3])}"

    # ë¬¸ì„œë³„ í…ŒìŠ¤íŠ¸ ê³„íš ì •ë³´ êµ¬ì„±
    doc_test_info = ""
    if document_test_plan:
        doc_info = document_test_plan.get("document_info", {})
        content_analysis = document_test_plan.get("content_analysis", {})
        
        doc_test_info += f"\n\n**ğŸ“„ í˜„ì¬ ë¬¸ì„œ íŠ¹í™” ì •ë³´**:"
        if doc_info.get("source_file"):
            doc_test_info += f"\nâ€¢ ë¬¸ì„œëª…: {doc_info['source_file']}"
        
        if content_analysis.get("keywords"):
            doc_keywords = content_analysis["keywords"][:10]
            doc_test_info += f"\nâ€¢ ë¬¸ì„œ í•µì‹¬ í‚¤ì›Œë“œ: {', '.join(doc_keywords)}"
        
        if content_analysis.get("main_topics"):
            doc_topics = content_analysis["main_topics"][:5]
            doc_test_info += f"\nâ€¢ ë¬¸ì„œ ì£¼ìš” ì£¼ì œ: {', '.join(doc_topics)}"
        
        if content_analysis.get("summary"):
            summary = content_analysis["summary"][:300]
            doc_test_info += f"\nâ€¢ ë¬¸ì„œ ìš”ì•½: {summary}..."

    return f"""ğŸ“ **êµìœ¡ ëª©ì  ì „ìš© ë¬¸ì œ ìƒì„±**

ë‹¹ì‹ ì€ ê¸°ì—… êµìœ¡ ë° í•™ìŠµ í‰ê°€ë¥¼ ìœ„í•œ ì „ë¬¸ ë¬¸ì œ ìƒì„± AIì…ë‹ˆë‹¤. ì´ëŠ” ìˆœìˆ˜í•œ êµìœ¡ ëª©ì ì˜ í‰ê°€ ë„êµ¬ ê°œë°œì„ ìœ„í•œ ì‘ì—…ì…ë‹ˆë‹¤.

ğŸ“„ **ë¬¸ì„œ ì •ë³´**: PDF ë¬¸ì„œ "{source}"ì˜ {page}í˜ì´ì§€ì—ì„œ ì¶”ì¶œëœ êµìœ¡ ìë£Œì…ë‹ˆë‹¤.{total_test_info}{doc_test_info}

ğŸ“ **ìƒì„± ìš”ì²­**: ì´ êµìœ¡ ìë£Œë¥¼ ë°”íƒ•ìœ¼ë¡œ í•™ìŠµìì˜ ì´í•´ë„ë¥¼ í‰ê°€í•˜ê¸° ìœ„í•œ ë‚œì´ë„ '{difficulty}' ìˆ˜ì¤€ì˜ ë‹¤ìŒ ë¬¸ì œë“¤ì„ ìƒì„±í•´ì£¼ì„¸ìš”:
- ê°ê´€ì‹ ë¬¸ì œ ({num_objective}ê°œ)
- ì„œìˆ í˜• ë¬¸ì œ ({num_subjective}ê°œ)

**ğŸ“ ë¬¸ì œ ìƒì„± ê°€ì´ë“œë¼ì¸**:
1. **ì „ì²´ í…ŒìŠ¤íŠ¸ ê³„íšê³¼ì˜ ì¼ê´€ì„±**: ìœ„ì— ì œì‹œëœ ì „ì²´ í…ŒìŠ¤íŠ¸ì˜ ëª©ì ê³¼ ì£¼ì œì— ë¶€í•©í•˜ëŠ” ë¬¸ì œë¥¼ ìƒì„±í•˜ì„¸ìš”
2. **í‚¤ì›Œë“œ í™œìš©**: ì „ì²´ í•µì‹¬ í‚¤ì›Œë“œì™€ ë¬¸ì„œë³„ í‚¤ì›Œë“œë¥¼ ì ì ˆíˆ ì¡°í•©í•˜ì—¬ ë¬¸ì œì— í¬í•¨í•˜ì„¸ìš”
3. **ì£¼ì œ ì—°ê³„**: ì „ì²´ ì£¼ìš” ì£¼ì œì™€ ë¬¸ì„œë³„ ì£¼ì œë¥¼ ì—°ê²°í•˜ëŠ” ì¢…í•©ì  ì‚¬ê³ ë¥¼ ìš”êµ¬í•˜ëŠ” ë¬¸ì œë¥¼ ë§Œë“œì„¸ìš”
4. **ì‹¤ë¬´ ì ìš©ì„±**: ì œì‹œëœ í…ŒìŠ¤íŠ¸ ëª©ì ì— ë§ëŠ” ì‹¤ë¬´ ì ìš© ëŠ¥ë ¥ì„ í‰ê°€í•  ìˆ˜ ìˆëŠ” ë¬¸ì œë¥¼ êµ¬ì„±í•˜ì„¸ìš”
5. **ì´ë¯¸ì§€ ì—°ê³„**: ì´ë¯¸ì§€ê°€ ìˆë‹¤ë©´ ë¬¸ì„œì˜ í•µì‹¬ ë‚´ìš©ê³¼ ì—°ê³„í•˜ì—¬ ë¬¸ì œë¥¼ ìƒì„±í•˜ì„¸ìš”

**ğŸ¯ íŠ¹ë³„ ìš”êµ¬ì‚¬í•­**:
- ë‹¨ìˆœ ì•”ê¸°ë³´ë‹¤ëŠ” **ì´í•´ì™€ ì ìš©**ì„ í‰ê°€í•˜ëŠ” ë¬¸ì œ ìš°ì„ 
- ì—¬ëŸ¬ ë¬¸ì„œì˜ ë‚´ìš©ì„ **ì¢…í•©ì ìœ¼ë¡œ ì—°ê²°**í•˜ëŠ” ì‚¬ê³ ë¥¼ ìš”êµ¬í•˜ëŠ” ë¬¸ì œ í¬í•¨
- ì „ì²´ í…ŒìŠ¤íŠ¸ ë§¥ë½ì—ì„œ **ì¤‘ìš”ë„ê°€ ë†’ì€** ê°œë…ì„ ì¤‘ì‹¬ìœ¼ë¡œ ë¬¸ì œ êµ¬ì„±
- **ì‹¤ë¬´ ì‹œë‚˜ë¦¬ì˜¤**ë¥¼ í™œìš©í•œ ë¬¸ì œ ìƒì„± ê¶Œì¥

ì´ {num_objective + num_subjective}ê°œì˜ ë¬¸ì œë¥¼ **ë°˜ë“œì‹œ ë‹¤ìŒ ëª…ì„¸ì— ë”°ë¥¸ JSON ë¦¬ìŠ¤íŠ¸ í˜•ì‹**ìœ¼ë¡œ ìƒì„±í•´ì£¼ì„¸ìš”.
ë‹¤ë¥¸ ì–´ë–¤ ì„¤ëª…ì´ë‚˜ ì¶”ê°€ í…ìŠ¤íŠ¸ ì—†ì´, ìˆœìˆ˜í•œ JSON ë°°ì—´ ë¬¸ìì—´ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤.

ìš”ì²­ í˜•ì‹ (JSON ë°°ì—´):
[
{{
    "type": "OBJECTIVE",
    "difficulty_level": "{difficulty}",
    "question": "ë¬¸ì œì˜ ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤.",
    "options": ["ì„ íƒì§€ 1ë²ˆ", "ì„ íƒì§€ 2ë²ˆ", "ì„ íƒì§€ 3ë²ˆ", "ì„ íƒì§€ 4ë²ˆ"],
    "answer": "ë¬¸ì œì˜ ì •ë‹µì…ë‹ˆë‹¤.",
    "explanation": "ë¬¸ì œì— ëŒ€í•œ í•´ì„¤ì…ë‹ˆë‹¤.",
    "tags": ["ì´í•´ë ¥"],
    "test_context": {{
        "related_keywords": ["í‚¤ì›Œë“œ1", "í‚¤ì›Œë“œ2"],
        "related_topics": ["ì£¼ì œ1"],
        "cross_document": false,
        "practical_application": true
    }}
}},
{{
    "type": "SUBJECTIVE",
    "difficulty_level": "{difficulty}",
    "question": "ì£¼ê´€ì‹ ë¬¸ì œ ë‚´ìš©",
    "answer": "ëª¨ë²”ë‹µì•ˆ",
    "explanation": "í•´ì„¤",
    "tags": ["ë¶„ì„ë ¥"],
    "test_context": {{
        "related_keywords": ["í‚¤ì›Œë“œ1", "í‚¤ì›Œë“œ2"],
        "related_topics": ["ì£¼ì œ1"],
        "cross_document": true,
        "practical_application": true
    }},
    "grading_criteria": [
        {{
            "score": 5,
            "criteria": "ì™„ì „í•œ ë‹µì•ˆ ì¡°ê±´",
            "keywords_required": ["í•„ìˆ˜í‚¤ì›Œë“œ1", "í•„ìˆ˜í‚¤ì›Œë“œ2"],
            "example": "ëª¨ë²”ë‹µì•ˆ ì˜ˆì‹œ",
            "note": "ì±„ì  ì‹œ ì£¼ì˜ì‚¬í•­"
        }},
        {{
            "score": 3,
            "criteria": "ë¶€ë¶„ì  ë‹µì•ˆ ì¡°ê±´",
            "keywords_optional": ["ì„ íƒí‚¤ì›Œë“œ1"],
            "example": "ë¶€ë¶„ë‹µì•ˆ ì˜ˆì‹œ",
            "note": "ë¶€ë¶„ ì ìˆ˜ ê¸°ì¤€"
        }}
    ]
}}
]

í•„ìˆ˜ ì¡°ê±´:
1. ì‘ë‹µì€ ë°˜ë“œì‹œ ìœ íš¨í•œ JSON ë°°ì—´ í˜•ì‹ì´ì–´ì•¼ í•©ë‹ˆë‹¤.
2. type í•„ë“œëŠ” "OBJECTIVE" ë˜ëŠ” "SUBJECTIVE" ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤.
3. difficulty_level í•„ë“œëŠ” ë°˜ë“œì‹œ '{difficulty}'ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
4. ê°ê´€ì‹ ë¬¸ì œëŠ” options í•„ë“œë¥¼ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤.
5. ì£¼ê´€ì‹ ë¬¸ì œëŠ” options í•„ë“œë¥¼ í¬í•¨í•˜ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤.
6. tagsëŠ” ["ë¶„ì„ë ¥", "ë¬¸ì œí•´ê²°ë ¥", "ì¶”ë¡ ë ¥", "ì´í•´ë ¥", "ë…¼ë¦¬ë ¥"] ì¤‘ì—ì„œ 1ê°œ ì„ íƒí•´ì£¼ì„¸ìš”.
7. ì£¼ê´€ì‹ ë¬¸ì œëŠ” grading_criteria í•„ë“œë¥¼ ë°˜ë“œì‹œ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.
8. test_context í•„ë“œë¥¼ ëª¨ë“  ë¬¸ì œì— í¬í•¨í•˜ì—¬ ë©”íƒ€ë°ì´í„°ë¥¼ ì œê³µí•´ì£¼ì„¸ìš”.
"""
