"""
Question Generator Prompts
"""

from typing import Dict, List, Optional


def get_vision_prompt(
    source: str,
    page: str,
    difficulty: str,
    num_objective: int,
    num_subjective: int,
    keywords: list = None,
    main_topics: list = None,
    test_config: dict = None,
) -> str:
    """
    GPT-4 Visionìš© ë¬¸ì œ ìƒì„± í”„ë¡¬í”„íŠ¸

    Args:
        source: ë¬¸ì„œ íŒŒì¼ëª…
        page: í˜ì´ì§€ ë²ˆí˜¸
        difficulty: ë‚œì´ë„ (EASY, NORMAL, HARD)
        num_objective: ê°ê´€ì‹ ë¬¸ì œ ìˆ˜
        num_subjective: ì£¼ê´€ì‹ ë¬¸ì œ ìˆ˜
        keywords: í‚¤ì›Œë“œ ëª©ë¡
        main_topics: ì£¼ìš” ì£¼ì œ ëª©ë¡
        test_config: í…ŒìŠ¤íŠ¸ ì„¤ì •

    Returns:
        str: í”„ë¡¬í”„íŠ¸ ë¬¸ìì—´
    """
    # í‚¤ì›Œë“œì™€ ì£¼ì œ ì •ë³´ ì¶”ê°€
    keyword_info = ""
    if keywords:
        keyword_info += f"\n\n**ì¤‘ìš” í‚¤ì›Œë“œ**: {', '.join(keywords[:10])}"
    if main_topics:
        keyword_info += f"\n**ì£¼ìš” ì£¼ì œ**: {', '.join(main_topics[:5])}"

    # í…ŒìŠ¤íŠ¸ ì„¤ì • ì •ë³´ ì¶”ê°€
    test_info = ""
    if test_config:
        if test_config.get("test_summary"):
            test_info += f"\n\n**í…ŒìŠ¤íŠ¸ ëª©ì **: {test_config['test_summary'][:200]}..."
        if test_config.get("topics"):
            test_info += f"\n**í‰ê°€ ì£¼ì œ**: {', '.join(test_config['topics'][:3])}"

    return f"""ğŸ“ **êµìœ¡ ëª©ì  ì „ìš© ë¬¸ì œ ìƒì„±**

ë‹¹ì‹ ì€ ê¸°ì—… êµìœ¡ ë° í•™ìŠµ í‰ê°€ë¥¼ ìœ„í•œ ì „ë¬¸ ë¬¸ì œ ìƒì„± AIì…ë‹ˆë‹¤. ì´ëŠ” ìˆœìˆ˜í•œ êµìœ¡ ëª©ì ì˜ í‰ê°€ ë„êµ¬ ê°œë°œì„ ìœ„í•œ ì‘ì—…ì…ë‹ˆë‹¤.

**ë¬¸ì„œ ì •ë³´**: PDF ë¬¸ì„œ "{source}"ì˜ {page}í˜ì´ì§€ì—ì„œ ì¶”ì¶œëœ êµìœ¡ ìë£Œì…ë‹ˆë‹¤.{keyword_info}{test_info}

**ìƒì„± ìš”ì²­**: ì´ êµìœ¡ ìë£Œë¥¼ ë°”íƒ•ìœ¼ë¡œ í•™ìŠµìì˜ ì´í•´ë„ë¥¼ í‰ê°€í•˜ê¸° ìœ„í•œ ë‚œì´ë„ '{difficulty}' ìˆ˜ì¤€ì˜ ë‹¤ìŒ ë¬¸ì œë“¤ì„ ìƒì„±í•´ì£¼ì„¸ìš”:
- ê°ê´€ì‹ ë¬¸ì œ ({num_objective}ê°œ)
- ì„œìˆ í˜• ë¬¸ì œ ({num_subjective}ê°œ)

**ë¬¸ì œ íƒœê·¸ë³„ ìƒì„± ì¡°ê±´**:
ë¬¸ì œëŠ” ë‹¤ìŒ íƒœê·¸ ì¤‘ í•˜ë‚˜ë¥¼ ë°˜ë“œì‹œ í¬í•¨í•˜ì—¬ ìƒì„±í•˜ì„¸ìš”. ê° íƒœê·¸ë³„ ì˜ˆì‹œë„ ì°¸ê³ í•˜ì„¸ìš”.

êµìœ¡ ëª©í‘œë¥¼ ì¸ì§€ì  ë³µì¡ì„± ìˆ˜ì¤€ì— ë”°ë¼ 6ë‹¨ê³„ë¡œ ë‚˜ëˆˆ ì²´ê³„ë¡œ, ë‹¨ê³„ê°€ ë†’ì„ìˆ˜ë¡ ì‚¬ê³ ì˜ ìˆ˜ì¤€ì´ ë†’ì•„ì§ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

1. Remember (ê¸°ì–µ): ì‚¬ì‹¤, ê°œë…, ì •ì˜ ë“±ì„ ë‹¨ìˆœíˆ íšŒìƒ
2. Understand (ì´í•´): ì •ë³´ë¥¼ í•´ì„, ìš”ì•½, ì„¤ëª…
3. Apply (ì ìš©): ì§€ì‹ì„ ìƒˆë¡œìš´ ìƒí™©ì— ì‚¬ìš©
4. Analyze (ë¶„ì„): ì •ë³´ì˜ êµ¬ì„±ìš”ì†Œë¥¼ êµ¬ë³„, ê´€ê³„ ë¶„ì„
5. Evaluate (í‰ê°€): íŒë‹¨ ê¸°ì¤€ìœ¼ë¡œ í‰ê°€, ë¹„íŒì  ì‚¬ê³ 
6. Create (ì°½ì¡°): ìƒˆë¡œìš´ êµ¬ì¡°, ì•„ì´ë””ì–´, ì œí’ˆì„ ìƒì„±

íƒœê·¸ë³„ ë¬¸ì œ ì˜ˆì‹œ
1. Remember
â€œì´ ê°œë…ì˜ ì •ì˜ëŠ” ë¬´ì—‡ì¸ê°€ìš”?â€
â€œë¬¸ì„œì—ì„œ ì–¸ê¸‰í•œ 3ê°€ì§€ ì£¼ìš” ìš”ì†ŒëŠ” ë¬´ì—‡ì¸ê°€ìš”?â€

2. Understand
â€œì´ ê°œë…ì„ ìì‹ ì˜ ë§ë¡œ ì„¤ëª…í•´ë³´ì„¸ìš”.â€
â€œì´ í”„ë¡œì„¸ìŠ¤ê°€ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ ìš”ì•½í•˜ì„¸ìš”.â€

3. Apply
â€œì´ ê³µì‹ì„ ì‚¬ìš©í•´ ë‹¤ìŒ ì‚¬ë¡€ë¥¼ ê³„ì‚°í•´ë³´ì„¸ìš”.â€
â€œì´ ë°©ë²•ë¡ ì„ ì‚¬ìš©í•´ A ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ì ˆì°¨ë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”.â€

4. Analyze
â€œì´ ì‚¬ë¡€ì˜ í•µì‹¬ ì›ì¸ì„ ì°¾ì•„ë³´ì„¸ìš”.â€
â€œì´ ë°ì´í„°ì˜ íŒ¨í„´ì„ ë¶„ì„í•´ ë³´ê³  ì¶”ì„¸ë¥¼ ì„¤ëª…í•˜ì„¸ìš”.â€

5. Evaluate
â€œì´ ë‘ ê°€ì§€ ì ‘ê·¼ ë°©ì‹ì„ ë¹„êµí•˜ê³  ë” ì í•©í•œ ê²ƒì„ ì„ íƒí•´ ì´ìœ ë¥¼ ì„¤ëª…í•˜ì„¸ìš”.â€
â€œì´ í”„ë¡œì íŠ¸ ì œì•ˆì„œì˜ ì¥ë‹¨ì ì„ í‰ê°€í•˜ì„¸ìš”.â€

6. Create
â€œì´ ê°œë…ì„ í™œìš©í•´ ìƒˆë¡œìš´ ë¬¸ì œ í•´ê²° ë°©ì•ˆì„ ì œì•ˆí•´ë³´ì„¸ìš”.â€
â€œì´ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‹œê°í™” ëŒ€ì‹œë³´ë“œë¥¼ ì„¤ê³„í•´ë³´ì„¸ìš”.â€

ê° íƒœê·¸ë³„ ìµœì†Œ 1ê°œ ì´ìƒ í¬í•¨í•˜ê³ , ì „ì²´ ë¬¸ì œ ìˆ˜ë¥¼ ë‹¤ì„¯ ê°œ íƒœê·¸ì— ê· ë“±í•˜ê²Œ ë¶„ë°°í•˜ì„¸ìš”.
ëª¨ë“  ë¬¸ì œëŠ” **ì´í•´â†’ì ìš©â†’ë¶„ì„â†’í‰ê°€** Bloomâ€™s Taxonomy ë‹¨ê³„ë¥¼ ê³ ë ¤í•´ êµ¬ì„±í•˜ì„¸ìš”.

**ğŸ“ ë¬¸ì œ ìƒì„± ê°€ì´ë“œë¼ì¸**:
1. **ì „ì²´ í…ŒìŠ¤íŠ¸ ê³„íšê³¼ì˜ ì¼ê´€ì„±**: ìœ„ì— ì œì‹œëœ ì „ì²´ í…ŒìŠ¤íŠ¸ì˜ ëª©ì ê³¼ ì£¼ì œì— ë¶€í•©í•˜ëŠ” ë¬¸ì œë¥¼ ìƒì„±í•˜ì„¸ìš”
2. **í‚¤ì›Œë“œ í™œìš©**: ì „ì²´ í•µì‹¬ í‚¤ì›Œë“œì™€ ë¬¸ì„œë³„ í‚¤ì›Œë“œë¥¼ ì ì ˆíˆ ì¡°í•©í•˜ì—¬ ë¬¸ì œì— í¬í•¨í•˜ì„¸ìš”
3. **ì£¼ì œ ì—°ê³„**: ì „ì²´ ì£¼ìš” ì£¼ì œì™€ ë¬¸ì„œë³„ ì£¼ì œë¥¼ ì—°ê²°í•˜ëŠ” ì¢…í•©ì  ì‚¬ê³ ë¥¼ ìš”êµ¬í•˜ëŠ” ë¬¸ì œë¥¼ ë§Œë“œì„¸ìš”
4. **ì‹¤ë¬´ ì ìš©ì„±**: ì œì‹œëœ í…ŒìŠ¤íŠ¸ ëª©ì ì— ë§ëŠ” ì‹¤ë¬´ ì ìš© ëŠ¥ë ¥ì„ í‰ê°€í•  ìˆ˜ ìˆëŠ” ë¬¸ì œë¥¼ êµ¬ì„±í•˜ì„¸ìš”
5. **ì´ë¯¸ì§€ ì—°ê³„**: ì´ë¯¸ì§€ê°€ í¬í•¨ë˜ë©´ ì´ë¯¸ì§€ ë‚´ìš© ì—°ê³„ ë¬¸ì œ ìµœì†Œ 1ê°œ ì´ìƒ ìƒì„±í•˜ì„¸ìš”
6. **ì¶œì²˜ ë¬¸ì œ ì œì™¸**: ë‹¨ìˆœ ë¬¸ì œ ì¶œì²˜ í™•ì¸ ë¬¸ì œëŠ” ì œì™¸í•´ì£¼ì„¸ìš”
7. ì¶œë ¥ ì‹œ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”. ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ ë¬¸ì œë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.


**ğŸ¯ íŠ¹ë³„ ìš”êµ¬ì‚¬í•­**:
- ë‹¨ìˆœ ì•”ê¸°ë³´ë‹¤ëŠ” **ì´í•´ì™€ ì ìš©**ì„ í‰ê°€í•˜ëŠ” ë¬¸ì œ ìš°ì„ 
- ì—¬ëŸ¬ ë¬¸ì„œì˜ ë‚´ìš©ì„ **ì¢…í•©ì ìœ¼ë¡œ ì—°ê²°**í•˜ëŠ” ì‚¬ê³ ë¥¼ ìš”êµ¬í•˜ëŠ” ë¬¸ì œ í¬í•¨
- ì „ì²´ í…ŒìŠ¤íŠ¸ ë§¥ë½ì—ì„œ **ì¤‘ìš”ë„ê°€ ë†’ì€** ê°œë…ì„ ì¤‘ì‹¬ìœ¼ë¡œ ë¬¸ì œ êµ¬ì„±
- **ì‹¤ë¬´ ì‹œë‚˜ë¦¬ì˜¤**ë¥¼ í™œìš©í•œ ë¬¸ì œ ìƒì„± ê¶Œì¥

í•„ìˆ˜ ì¡°ê±´:
1. ì‘ë‹µì€ ë°˜ë“œì‹œ ìœ íš¨í•œ JSON ë°°ì—´ í˜•ì‹ì´ì–´ì•¼ í•©ë‹ˆë‹¤.
2. type í•„ë“œëŠ” "OBJECTIVE" ë˜ëŠ” "SUBJECTIVE" ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤.
3. difficulty_level í•„ë“œëŠ” ë°˜ë“œì‹œ '{difficulty}'ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
4. ê°ê´€ì‹ ë¬¸ì œëŠ” options í•„ë“œë¥¼ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤.
5. ì£¼ê´€ì‹ ë¬¸ì œëŠ” options í•„ë“œë¥¼ í¬í•¨í•˜ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤.
6. tagsëŠ” ["ê¸°ì–µ", "ì´í•´", "ì ìš©", "ë¶„ì„", "í‰ê°€", "ì°½ì¡°"] ì¤‘ì—ì„œ 1ê°œë§Œ ì„ íƒí•´ì£¼ì„¸ìš”.
7. ì£¼ê´€ì‹ ë¬¸ì œëŠ” grading_criteria í•„ë“œë¥¼ ë°˜ë“œì‹œ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.
8. test_context í•„ë“œë¥¼ ëª¨ë“  ë¬¸ì œì— í¬í•¨í•˜ì—¬ ë©”íƒ€ë°ì´í„°ë¥¼ ì œê³µí•´ì£¼ì„¸ìš”.

ì´ {num_objective + num_subjective}ê°œì˜ ë¬¸ì œë¥¼ **ë°˜ë“œì‹œ ë‹¤ìŒ ëª…ì„¸ì— ë”°ë¥¸ JSON ë¦¬ìŠ¤íŠ¸ í˜•ì‹**ìœ¼ë¡œ ìƒì„±í•´ì£¼ì„¸ìš”.
ë‹¤ë¥¸ ì–´ë–¤ ì„¤ëª…ì´ë‚˜ ì¶”ê°€ í…ìŠ¤íŠ¸ ì—†ì´, ìˆœìˆ˜í•œ JSON ë°°ì—´ ë¬¸ìì—´ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤.

ìš”ì²­ í˜•ì‹ (JSON ë°°ì—´):
[
{{
    "type": "OBJECTIVE",
    "difficulty_level": "{difficulty}",
    "question": "ë¬¸ì œì˜ ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤.",
    "options": ["ì„ íƒì§€ 1ë²ˆ", "ì„ íƒì§€ 2ë²ˆ", "ì„ íƒì§€ 3ë²ˆ", "ì„ íƒì§€ 4ë²ˆ"],
    "answer": "ë¬¸ì œì˜ ì •ë‹µì…ë‹ˆë‹¤.",
    "explanation": "ë¬¸ì œì— ëŒ€í•œ í•´ì„¤ì…ë‹ˆë‹¤.",
    "tags": ["ì´í•´"]
}},
{{
    "type": "SUBJECTIVE",
    "difficulty_level": "{difficulty}",
    "question": "ì£¼ê´€ì‹ ë¬¸ì œ ë‚´ìš©",
    "answer": "ëª¨ë²”ë‹µì•ˆ",
    "explanation": "í•´ì„¤",
    "tags": ["ë¶„ì„"],
    "grading_criteria": [
        {{
            "score": 5,
            "criteria": "ì™„ì „í•œ ë‹µì•ˆ ì¡°ê±´",
            "keywords_required": ["í•„ìˆ˜í‚¤ì›Œë“œ1", "í•„ìˆ˜í‚¤ì›Œë“œ2"],
            "example": "ëª¨ë²”ë‹µì•ˆ ì˜ˆì‹œ",
            "note": "ì±„ì  ì‹œ ì£¼ì˜ì‚¬í•­"
        }},
        {{
            "score": 3,
            "criteria": "ë¶€ë¶„ì  ë‹µì•ˆ ì¡°ê±´",
            "keywords_optional": ["ì„ íƒí‚¤ì›Œë“œ1"],
            "example": "ë¶€ë¶„ë‹µì•ˆ ì˜ˆì‹œ",
            "note": "ë¶€ë¶„ ì ìˆ˜ ê¸°ì¤€"
        }}
    ]
}}
]

í•„ìˆ˜ ì¡°ê±´:
1. ì‘ë‹µì€ ë°˜ë“œì‹œ ìœ íš¨í•œ JSON ë°°ì—´ í˜•ì‹ì´ì–´ì•¼ í•©ë‹ˆë‹¤.
2. type í•„ë“œëŠ” "OBJECTIVE" ë˜ëŠ” "SUBJECTIVE" ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤.
3. difficulty_level í•„ë“œëŠ” ë°˜ë“œì‹œ '{difficulty}'ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
4. ê°ê´€ì‹ ë¬¸ì œëŠ” options í•„ë“œë¥¼ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤.
5. ì£¼ê´€ì‹ ë¬¸ì œëŠ” options í•„ë“œë¥¼ í¬í•¨í•˜ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤.
6. tagsëŠ” ["ê¸°ì–µ", "ì´í•´", "ì ìš©", "ë¶„ì„", "í‰ê°€", "ì°½ì¡°"] ì¤‘ì—ì„œ 1ê°œë§Œ ì„ íƒí•´ì£¼ì„¸ìš”.
7. ì£¼ê´€ì‹ ë¬¸ì œëŠ” grading_criteria í•„ë“œë¥¼ ë°˜ë“œì‹œ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.
"""


def get_enhanced_vision_prompt(
    source: str,
    page: str,
    difficulty: str,
    num_objective: int,
    num_subjective: int,
    total_test_plan: Optional[Dict] = None,
    document_test_plan: Optional[Dict] = None,
) -> str:
    """
    Test Plan ì •ë³´ë¥¼ í™œìš©í•œ í–¥ìƒëœ ë¬¸ì œ ìƒì„± í”„ë¡¬í”„íŠ¸

    Args:
        source: ë¬¸ì„œ íŒŒì¼ëª…
        page: í˜ì´ì§€ ë²ˆí˜¸
        difficulty: ë‚œì´ë„ (EASY, NORMAL, HARD)
        num_objective: ê°ê´€ì‹ ë¬¸ì œ ìˆ˜
        num_subjective: ì£¼ê´€ì‹ ë¬¸ì œ ìˆ˜
        total_test_plan: ì „ì²´ í…ŒìŠ¤íŠ¸ ê³„íš ì •ë³´
        document_test_plan: ë¬¸ì„œë³„ í…ŒìŠ¤íŠ¸ ê³„íš ì •ë³´

    Returns:
        str: í–¥ìƒëœ í”„ë¡¬í”„íŠ¸ ë¬¸ìì—´
    """
    # ì „ì²´ í…ŒìŠ¤íŠ¸ ê³„íš ì •ë³´ êµ¬ì„±
    total_test_info = ""
    if total_test_plan:
        metadata = total_test_plan.get("metadata", {})
        test_plan = total_test_plan.get("test_plan", {})
        aggregated_info = total_test_plan.get("aggregated_info", {})

        total_test_info += f"\n\n**ğŸ“‹ ì „ì²´ í…ŒìŠ¤íŠ¸ ê³„íš ì •ë³´**:"
        if test_plan.get("name"):
            total_test_info += f"\nâ€¢ í…ŒìŠ¤íŠ¸ëª…: {test_plan['name']}"
        if test_plan.get("test_summary"):
            total_test_info += f"\nâ€¢ í…ŒìŠ¤íŠ¸ ëª©ì : {test_plan['test_summary']}"
        if test_plan.get("difficulty_level"):
            total_test_info += f"\nâ€¢ ì „ì²´ ë‚œì´ë„: {test_plan['difficulty_level']}"
        if test_plan.get("limited_time"):
            total_test_info += f"\nâ€¢ ì œí•œì‹œê°„: {test_plan['limited_time']}ë¶„"

        # í†µí•©ëœ í‚¤ì›Œë“œì™€ ì£¼ì œ ì •ë³´
        if aggregated_info.get("all_keywords"):
            keywords = aggregated_info["all_keywords"][:15]  # ìƒìœ„ 15ê°œ
            total_test_info += f"\nâ€¢ ì „ì²´ í•µì‹¬ í‚¤ì›Œë“œ: {', '.join(keywords)}"

        if aggregated_info.get("all_topics"):
            topics = aggregated_info["all_topics"][:10]  # ìƒìœ„ 10ê°œ
            total_test_info += f"\nâ€¢ ì „ì²´ ì£¼ìš” ì£¼ì œ: {', '.join(topics)}"

        if metadata.get("document_names"):
            total_test_info += (
                f"\nâ€¢ ê´€ë ¨ ë¬¸ì„œ: {', '.join(metadata['document_names'][:3])}"
            )

    # ë¬¸ì„œë³„ í…ŒìŠ¤íŠ¸ ê³„íš ì •ë³´ êµ¬ì„±
    doc_test_info = ""
    if document_test_plan:
        doc_info = document_test_plan.get("document_info", {})
        content_analysis = document_test_plan.get("content_analysis", {})

        doc_test_info += f"\n\n**ğŸ“„ í˜„ì¬ ë¬¸ì„œ íŠ¹í™” ì •ë³´**:"
        if doc_info.get("source_file"):
            doc_test_info += f"\nâ€¢ ë¬¸ì„œëª…: {doc_info['source_file']}"

        if content_analysis.get("keywords"):
            doc_keywords = content_analysis["keywords"][:10]
            doc_test_info += f"\nâ€¢ ë¬¸ì„œ í•µì‹¬ í‚¤ì›Œë“œ: {', '.join(doc_keywords)}"

        if content_analysis.get("main_topics"):
            doc_topics = content_analysis["main_topics"][:5]
            doc_test_info += f"\nâ€¢ ë¬¸ì„œ ì£¼ìš” ì£¼ì œ: {', '.join(doc_topics)}"

        if content_analysis.get("summary"):
            summary = content_analysis["summary"][:300]
            doc_test_info += f"\nâ€¢ ë¬¸ì„œ ìš”ì•½: {summary}..."

    return f"""ğŸ“ **êµìœ¡ ëª©ì  ì „ìš© ë¬¸ì œ ìƒì„±**

ë‹¹ì‹ ì€ ê¸°ì—… êµìœ¡ ë° í•™ìŠµ í‰ê°€ë¥¼ ìœ„í•œ ì „ë¬¸ ë¬¸ì œ ìƒì„± AIì…ë‹ˆë‹¤. ì´ëŠ” ìˆœìˆ˜í•œ êµìœ¡ ëª©ì ì˜ í‰ê°€ ë„êµ¬ ê°œë°œì„ ìœ„í•œ ì‘ì—…ì…ë‹ˆë‹¤.

ğŸ“„ **ë¬¸ì„œ ì •ë³´**: PDF ë¬¸ì„œ "{source}"ì˜ {page}í˜ì´ì§€ì—ì„œ ì¶”ì¶œëœ êµìœ¡ ìë£Œì…ë‹ˆë‹¤.{total_test_info}{doc_test_info}

ğŸ“ **ìƒì„± ìš”ì²­**: ì´ êµìœ¡ ìë£Œë¥¼ ë°”íƒ•ìœ¼ë¡œ í•™ìŠµìì˜ ì´í•´ë„ë¥¼ í‰ê°€í•˜ê¸° ìœ„í•œ ë‚œì´ë„ '{difficulty}' ìˆ˜ì¤€ì˜ ë‹¤ìŒ ë¬¸ì œë“¤ì„ ìƒì„±í•´ì£¼ì„¸ìš”:
- ê°ê´€ì‹ ë¬¸ì œ ({num_objective}ê°œ)
- ì„œìˆ í˜• ë¬¸ì œ ({num_subjective}ê°œ)

**ë¬¸ì œ íƒœê·¸ë³„ ìƒì„± ì¡°ê±´**:
ë¬¸ì œëŠ” ë‹¤ìŒ Bloom's Taxonomy íƒœê·¸ ì¤‘ í•˜ë‚˜ë¥¼ ë°˜ë“œì‹œ í¬í•¨í•˜ì—¬ ìƒì„±í•˜ì„¸ìš”.

êµìœ¡ ëª©í‘œë¥¼ ì¸ì§€ì  ë³µì¡ì„± ìˆ˜ì¤€ì— ë”°ë¼ 6ë‹¨ê³„ë¡œ ë‚˜ëˆˆ ì²´ê³„ë¡œ, ë‹¨ê³„ê°€ ë†’ì„ìˆ˜ë¡ ì‚¬ê³ ì˜ ìˆ˜ì¤€ì´ ë†’ì•„ì§ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

1. ê¸°ì–µ: ì‚¬ì‹¤, ê°œë…, ì •ì˜ ë“±ì„ ë‹¨ìˆœíˆ íšŒìƒ
2. ì´í•´: ì •ë³´ë¥¼ í•´ì„, ìš”ì•½, ì„¤ëª…
3. ì ìš©: ì§€ì‹ì„ ìƒˆë¡œìš´ ìƒí™©ì— ì‚¬ìš©
4. ë¶„ì„: ì •ë³´ì˜ êµ¬ì„±ìš”ì†Œë¥¼ êµ¬ë³„, ê´€ê³„ ë¶„ì„
5. í‰ê°€: íŒë‹¨ ê¸°ì¤€ìœ¼ë¡œ í‰ê°€, ë¹„íŒì  ì‚¬ê³ 
6. ì°½ì¡°: ìƒˆë¡œìš´ êµ¬ì¡°, ì•„ì´ë””ì–´, ì œí’ˆì„ ìƒì„±

ê° íƒœê·¸ë³„ ìµœì†Œ 1ê°œ ì´ìƒ í¬í•¨í•˜ê³ , ì „ì²´ ë¬¸ì œ ìˆ˜ë¥¼ 6ê°œ íƒœê·¸ì— ê· ë“±í•˜ê²Œ ë¶„ë°°í•˜ì„¸ìš”.

**í•„ìˆ˜ ì¡°ê±´**:
1. ì‘ë‹µì€ ë°˜ë“œì‹œ ìœ íš¨í•œ JSON ë°°ì—´ í˜•ì‹ì´ì–´ì•¼ í•©ë‹ˆë‹¤.
2. type í•„ë“œëŠ” "OBJECTIVE" ë˜ëŠ” "SUBJECTIVE" ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤.
3. difficulty_level í•„ë“œëŠ” ë°˜ë“œì‹œ '{difficulty}'ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
4. ê°ê´€ì‹ ë¬¸ì œëŠ” options í•„ë“œë¥¼ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤.
5. ì£¼ê´€ì‹ ë¬¸ì œëŠ” options í•„ë“œë¥¼ í¬í•¨í•˜ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤.
6. tagsëŠ” ["ê¸°ì–µ", "ì´í•´", "ì ìš©", "ë¶„ì„", "í‰ê°€", "ì°½ì¡°"] ì¤‘ì—ì„œ 1ê°œë§Œ ì„ íƒí•´ì£¼ì„¸ìš”.
7. ì£¼ê´€ì‹ ë¬¸ì œëŠ” grading_criteria í•„ë“œë¥¼ ë°˜ë“œì‹œ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.
8. test_context í•„ë“œë¥¼ ëª¨ë“  ë¬¸ì œì— í¬í•¨í•˜ì—¬ ë©”íƒ€ë°ì´í„°ë¥¼ ì œê³µí•´ì£¼ì„¸ìš”.

ì´ {num_objective + num_subjective}ê°œì˜ ë¬¸ì œë¥¼ **ë°˜ë“œì‹œ ë‹¤ìŒ ëª…ì„¸ì— ë”°ë¥¸ JSON ë¦¬ìŠ¤íŠ¸ í˜•ì‹**ìœ¼ë¡œ ìƒì„±í•´ì£¼ì„¸ìš”.
ë‹¤ë¥¸ ì–´ë–¤ ì„¤ëª…ì´ë‚˜ ì¶”ê°€ í…ìŠ¤íŠ¸ ì—†ì´, ìˆœìˆ˜í•œ JSON ë°°ì—´ ë¬¸ìì—´ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤.

ìš”ì²­ í˜•ì‹ (JSON ë°°ì—´):
[
{{
    "type": "OBJECTIVE",
    "difficulty_level": "{difficulty}",
    "question": "ë¬¸ì œì˜ ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤.",
    "options": ["ì„ íƒì§€ 1ë²ˆ", "ì„ íƒì§€ 2ë²ˆ", "ì„ íƒì§€ 3ë²ˆ", "ì„ íƒì§€ 4ë²ˆ"],
    "answer": "ë¬¸ì œì˜ ì •ë‹µì…ë‹ˆë‹¤.",
    "explanation": "ë¬¸ì œì— ëŒ€í•œ í•´ì„¤ì…ë‹ˆë‹¤.",
    "tags": ["ì´í•´"],
    "test_context": {{
        "related_keywords": ["í‚¤ì›Œë“œ1", "í‚¤ì›Œë“œ2"],
        "related_topics": ["ì£¼ì œ1"],
        "cross_document": false,
        "practical_application": true
    }}
}},
{{
    "type": "SUBJECTIVE",
    "difficulty_level": "{difficulty}",
    "question": "ì£¼ê´€ì‹ ë¬¸ì œ ë‚´ìš©",
    "answer": "ëª¨ë²”ë‹µì•ˆ",
    "explanation": "í•´ì„¤",
    "tags": ["ë¶„ì„"],
    "test_context": {{
        "related_keywords": ["í‚¤ì›Œë“œ1", "í‚¤ì›Œë“œ2"],
        "related_topics": ["ì£¼ì œ1"],
        "cross_document": true,
        "practical_application": true
    }},
    "grading_criteria": [
        {{
            "score": 5,
            "criteria": "ì™„ì „í•œ ë‹µì•ˆ ì¡°ê±´",
            "keywords_required": ["í•„ìˆ˜í‚¤ì›Œë“œ1", "í•„ìˆ˜í‚¤ì›Œë“œ2"],
            "example": "ëª¨ë²”ë‹µì•ˆ ì˜ˆì‹œ",
            "note": "ì±„ì  ì‹œ ì£¼ì˜ì‚¬í•­"
        }},
        {{
            "score": 3,
            "criteria": "ë¶€ë¶„ì  ë‹µì•ˆ ì¡°ê±´",
            "keywords_optional": ["ì„ íƒí‚¤ì›Œë“œ1"],
            "example": "ë¶€ë¶„ë‹µì•ˆ ì˜ˆì‹œ",
            "note": "ë¶€ë¶„ ì ìˆ˜ ê¸°ì¤€"
        }}
    ]
}}
]


"""
